# ä»Šæ—¥æ ¡å›­è‡ªåŠ¨ç­¾åˆ°

**éç§‘ç­å‡ºèº«ï¼Œä»£ç å’Œç”¨è¯­æœ‰ä¸è§„èŒƒçš„åœ°æ–¹è¯·è§è°…**

## ä¸€ã€èƒŒæ™¯

è‡ªä»ç–«æƒ…åï¼Œæˆ‘ä»¬å­¦æ ¡æ¯å¤©éƒ½è¦ä»Šæ—¥æ ¡å›­ç­¾åˆ°ï¼Œè€Œæˆ‘ç»å¸¸å¿˜è®°ï¼Œå®šäº†é—¹é’Ÿéƒ½ç»å¸¸å¿™å®Œæ‰‹ä¸Šçš„äº‹è½¬çœ¼å°±ç»™å¿˜äº†ï¼Œæ˜¯å¿˜ç­¾åˆ°åå•ä¸Šçš„å¸¸å®¢ï¼Œå‡†å¤‡å†™ä¸€ä¸ªç¨‹åºï¼Œè®©ä»–è‡ªåŠ¨ç­¾ä¸ªåˆ°

## äºŒã€å‡†å¤‡ç¯å¢ƒ

ä¸‹è½½ä¸€ä¸ª`python`ç¯å¢ƒ

ç‚¹å‡»[è¿›å…¥å®˜ç½‘](https://www.python.org/downloads/)

**æ¨èä½¿ç”¨3.7æˆ–3.8ç‰ˆæœ¬**ï¼Œé¡¹ç›®ä½¿ç”¨3.7ç‰ˆæœ¬

## ä¸‰ã€ç®€è¿°æ€è·¯

>1. **é¦–å…ˆæˆ‘ä»¬è¦ææ˜ç™½ä»Šæ—¥æ ¡å›­ç­¾åˆ°ä½ çš„æ‰‹æœºä¼šå‘å‡ºä»€ä¹ˆè¯·æ±‚**
>2. **ç„¶åæˆ‘ä»¬å¯¹è¿™ä¸ªè¯·æ±‚è¿›è¡Œä¸€ä¸ªæ¨¡æ‹Ÿ**
>3. **æœ€åæˆ‘ä»¬è¦æƒ³ä¸ªåŠæ³•è®©è¿™ä¸ªç¨‹åºæ¯å¤©è‡ªåŠ¨è¿è¡Œ**

## å››ã€å®ç°

### 1.å¯¹ä»Šæ—¥æ ¡å›­è¿›è¡ŒæŠ“åŒ…

å…‰æ˜¯æŠ“åŒ…å°±æŠ˜è…¾äº†æˆ‘ä¸¤å¤©ï¼Œä»¥å‰æ²¡çˆ¬è¿‡APPï¼ŒæŠ“åˆ°åŒ…ä¸çŸ¥ä»ä½•ä¸‹æ‰‹ğŸ˜‚

æŠ“åŒ…æ˜¯ä¸ªé‡è¦çš„è¿‡ç¨‹ï¼Œä½ æ¼æŠ“æˆ–è€…çœ‹æ¼äº†éƒ½ä¼šè®©ä½ èµ°å¾ˆå¤šå¼¯è·¯ï¼Œæˆ‘å°±æ˜¯

### 2.å†™ä»£ç 

åˆ›å»ºä¸€ä¸ª`config/config.json`æ–‡ä»¶ç”¨äºå­˜æ”¾é…ç½®æ•°æ®

#### 1.é…ç½®æ—¥å¿—æ–‡ä»¶

æ–°å»ºæ–‡ä»¶`logger.conf`

```
#logger.conf

###############################################

[loggers]
keys=root,jrxy

[logger_root]
level=DEBUG
handlers=stream

[logger_jrxy]
handlers=stream,timedrt,http
qualname=jrxy
propagate=0

###############################################

[handlers]
keys=stream,timedrt,http

[handler_stream]
class=StreamHandler
level=NOTSET
formatter=form01
args=(sys.stderr,)

[handler_filert]
class=handlers.RotatingFileHandler
level=INFO
formatter=form02
args=('log/jrxy.log', 'a', 10*1024*1024, 5)

[handler_timedrt]
class=handlers.TimedRotatingFileHandler
level=DEBUG
formatter=form01
args=('log/jrxy.log', 'd', 1 , 5 )

[handler_http]
class=handlers.HTTPHandler
level=ERROR
formatter=form01
args=('localhost:8087', '/api/v1.0/log', 'POST')


###############################################

[formatters]
keys=form01,form02

[formatter_form01]
format=[%(asctime)s][%(filename)s][line:%(lineno)d][%(levelname)s] %(message)s
datefmt=%a, %d %b %Y %H:%M:%S

[formatter_form02]
format=%(name)-12s: %(levelname)-8s %(message)s
datefmt=
```

æ–°å»º`config.py`

```python
import logging
from logging import config

logging.config.fileConfig("logger.conf")
logger = logging.getLogger("jrxy")
```

æ–°å»ºæ–‡ä»¶å¤¹`log`,åœ¨logæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ–‡ä»¶`jrxy.log`

#### 2.è·å–å­¦æ ¡ID

æ–°å»º`getSchoolId.py`æ–‡ä»¶

```python
def getJson(url):
    try:
        r = requests.get(url, timeout=5)
        r.encoding = r.apparent_encoding
        return r.json()['data']
    except:
        raise

def cleanData(data: dict, school_list: list):
    pass
```

**è¿™é‡Œæœ‰æ¥å£é™åˆ¶ï¼Œä¸è¦é¢‘ç¹è°ƒç”¨æ¥å£**

***è¿™é‡Œä¸è´´å‡ºå…·ä½“å®ç°ï¼Œæ‹¿åˆ°æ•°æ®äº†ï¼Œä»æ•°æ®ä¸­æ‰¾åˆ°å­¦æ ¡IDåº”è¯¥ä¸éš¾ã€‚***

#### 3.è·å–ç™»å½•çš„åœ°å€

~~ç™»å½•åœ°å€ä¸å¥½æå•Šï¼Œç›®å‰ä»…æ”¯æŒ`å¤§è¿å¤§å­¦`, ä¼šæçš„å¯ä»¥è‡ªå·±æ”¹æ”¹~~

æ–°å»º`getSchoolLoginUrl.py`æ–‡ä»¶

```python
def getlogin(__school_id):
    pass
```

~~**ç¬¬äºŒæ­¥å¯ä»¥çœç•¥ï¼Œæˆ‘å½“æ—¶æ˜¯å†™éƒ½å†™äº†å°±ç›´æ¥ç”¨idäº†ï¼Œä¼šæ”¹çš„å¾®æ”¹ä¸€ä¸‹ç¬¬ä¸‰æ­¥çš„ä»£ç å³å¯**~~

**ä¸å¯ä»¥çœç•¥ï¼Œè‡ªè¡Œè·å–å¿…é¡»è¦å­¦æ ¡ID**

#### 4æ¨¡æ‹Ÿç™»å½•

æ–°å»º`login.py`æ–‡ä»¶

~~ç™»å½•éå¸¸éº»çƒ¦ï¼Œæœ‰éå¸¸å¤šçš„éªŒè¯ï¼ŒéªŒè¯è™½ç„¶å¤šï¼Œä½†è¿˜å¥½çš„æ˜¯è¿‡äº†éªŒè¯å°±æˆåŠŸä¸€åŠäº†ğŸ˜~~

ä¸»è¦å‰é¢é…ç½®è¯·æ±‚å¤´ä¸€å®šè¦é…ç½®æ­£ç¡®

***==åŠ æ²¹ä¸Šå­¦äººï¼ï¼ï¼==***

```python
class Login:
    def __init__(self, data):
        pass

    # è§£å¯† ä¸ä¼šåšé€†å‘ï¼Œè§£å¯†å’Œåˆå§‹æ˜¯ç›´æ¥å¤åˆ¶FuckCampusé¡¹ç›®çš„
    def encrypt(self, text):
        pass

    # é‡å†™requestsæ–¹æ³• é‡æ„çš„requestsæ–¹æ³•ï¼Œæˆ‘æ„Ÿè§‰è¿™ä¸€æ­¥ç®€ç›´å°±æ˜¯ç¥æ¥ä¹‹ç¬”
    def request(self, url: str, data=None, parseJson=True, JsonBody=True, Referer=None):
        try:
            url = url.format(host=self.host)
            if Referer != None:
                self.session.headers.update({"Referer": Referer})
            if data == None:
                res = self.session.get(url)
            else:
                self.session.headers.update(
                    {"Content-Type": ("application/json" if JsonBody else "application/x-www-form-urlencoded")})
                res = self.session.post(url, data=(
                    json.dumps(data) if JsonBody else data))
            if parseJson:
                return json.loads(res.text)
            else:
                return res
        except:
            # TODO send_email
            logger.debug('ç™»å½•: è·å–é“¾æ¥å¤±è´¥')
            exit(-1)

    # ç™»å½•
    def login(self, captcha=""):
        pass
```

æˆ‘æ„é€ äº†ä¸€ä¸ªç±»æ¥å®ç°ç™»å½•

#### 5.è·å–è¡¨å•

åœ¨`Login`ç±»ä¸­

```python
    def getcollectorlist(self):
        pass
    # è·å–schoolTaskWid
    def getdetailcollector(self, data):
        pass

    # æŸ¥è¯¢form
    def queryform(self, data):
        pass
```



#### 6.å¡«å†™å¹¶æäº¤è¡¨å•

ç°åœ¨æˆ‘ä»¬æ¥å¡«å†™è¡¨å•

```python
	def fillform(self, form):
		pass
    
    # æˆ‘æ²¡æœ‰é‡è§è¿‡é—®é¢˜ç±»å‹ä¸º3ï¼Œ4çš„ï¼Œä¸Šé¢å…³äºé—®é¢˜ç±»å‹ä¸º3ï¼Œ4çš„å’Œä¸‹é¢çš„éªŒè¯æˆ‘éƒ½æ˜¯ç›´æ¥å¤åˆ¶auto-submité‚£ä¸ªé¡¹ç›®çš„
    def uploadpicture(self, image):
        pass
    
    def getpictureurl(self, fileName):
        pass
```

æäº¤è¡¨å•ï¼Œ***è¿™é‡Œå°±ä¸è´´å‡ºå…·ä½“å‚æ•°äº†***

```python
	def submitform(self):
        pass
```

#### 7.åšä¸€ä¸ªç”Ÿæˆé…ç½®æ–‡ä»¶çš„ç¨‹åº

æ–°å»ºä¸€ä¸ª`generate.py`æ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯å—åˆ°äº†auto-submitçš„å¯å‘ï¼Œå¦‚æœä¸æ‡‚ä»£ç ç¡®å®å®¹æ˜“é…ç½®é”™ï¼Œæ—¢ç„¶è¿™æ ·é‚£æˆ‘å°±å†™ä¸ªé…ç½®ç¨‹åºå¸®ä½ é…ç½®

è¿™ä¸ªç¨‹åºä½œç”¨ä¸å¤§ï¼Œä¼šè‡ªå·±é…ç½®çš„å¯ä»¥è‡ªå·±é…ç½®ï¼Œæˆ‘å°±å†™å¾—å¾ˆæ½¦è‰å¾ˆä¸è§„èŒƒï¼ŒæŠ±æ­‰ğŸ˜œ

å¹¶ä¸”æˆ‘åªé‡è§è¿‡é—®é¢˜ç±»å‹1å’Œ2ï¼Œå¯¹3ï¼Œ4çš„æ”¯æŒå¯èƒ½æ²¡é‚£ä¹ˆå¥½ï¼Œèƒ½è‡ªè¡Œé…ç½®çš„å¯ä»¥è‡ªè¡Œé…ç½®

```python
import json
import os
if not os.path.exists(os.getcwd()+'\\config'):
    os.mkdir(os.getcwd()+'\\config')
if not os.path.exists(os.getcwd()+'\\log'):
    os.mkdir(os.getcwd()+'\\log')
if not os.path.isfile(os.getcwd()+'\\log\\jrxy.log'):
    with open(os.getcwd()+'\\log\\jrxy.log', 'w', encoding='utf-8') as f:
        f.write('# @author   : GaiusPluto')


if __name__ == '__main__':
    fs = input('è¯·è¾“å…¥ä½ å¤§å­¦çš„é¦–å­—æ¯: ').upper()
    print(fs)
    school_name = input('è¯·è¾“å…¥ä½ å¤§å­¦åå­—: ')
    print(school_name)
    username = input('è¯·è¾“å…¥ä½ çš„å­¦å·(ä»…æ”¯æŒå­¦å·): ')
    password = input('è¯·è¾“å…¥ä½ çš„å¯†ç : ')
    address = input('è¯·è¾“å…¥ä½ çš„åœ°å€: ')
    form_list = []
    flag = 1
    while True:
        title = input("è¾“å…¥é—®é¢˜"+str(flag)+"æ ‡é¢˜(å»ºè®®ç›´æ¥å¤åˆ¶ç²˜è´´,è¾“å…¥-1ç»“æŸ): ")
        if title == '-1':
            break
        type = input('è¾“å…¥é—®é¢˜'+str(flag)+'ç±»å‹,ä¸€èˆ¬å›ç­”é—®é¢˜ä¸º1,å•é€‰ä¸º2,å¤šé€‰ä¸º3,æ‹æ‘„ç…§ç‰‡ä¸º4: ')
        value = input('è¾“å…¥é—®é¢˜'+str(flag)+'çš„é»˜è®¤å›ç­”: ')
        form_list.append({
          "default": {
            "title": title,
            "type": eval(type),
            "value": value
          }
        })
        flag+=1
    config = {
        "data": {
            "getSchoolId": {
                "url": "https://static.campushoy.com/apicache/tenantListSort",
                "sectionName": "{}".format(fs),
                "name": "{}".format(school_name)
            },
            "getSchoolLoginUrl": {
                "url": "https://mobile.campushoy.com/v6/config/guest/tenant/list"
            },
            "login": {
                "username": "{}".format(username),
                "password": "{}".format(password),
                "address": "{}".format(address)
            },
            "rem_form": False,
            "form": {
                "defaults": form_list
            }
        }
    }
    json.dump(config, open(os.getcwd()+'\\conf\\config.json', 'w', encoding='utf-8'))
```



### 3.é€šçŸ¥ä½¿ç”¨è€…ç»“æœ

æˆ‘çš„æƒ³æ³•æ˜¯åšä¸€ä¸ªæ¥å£ï¼Œå¾®ä¿¡é€šçŸ¥ï¼Œå› ä¸ºæ¯å¤©ä¸€å°é‚®ä»¶è¿˜è¦ä¸“é—¨æ‰“å¼€é‚®ä»¶æ¥çœ‹çœŸçš„å¾ˆéº»çƒ¦ï¼Œè¿™ä¸ªæš‚æ—¶è¿˜æ²¡å®ç°ï¼Œç­‰æˆ‘åšå®Œè¿™ä¸ªæˆ‘å†å»æ£é¼“å¾®ä¿¡å…¬ä¼—å·å’‹å¼„å§ğŸ˜‚

### 4.ä½¿ç”¨

å…³äºè¿™ä¸ªé—®é¢˜å…¶å®ç½‘ä¸Šæœ‰å¾ˆå¥½çš„åŠæ³•äº†ï¼Œå°±æ˜¯**è…¾è®¯äº‘å‡½æ•°**

å…¶å®æˆ‘è¿˜æœ‰ä¸ªæƒ³æ³•å°±æ˜¯éƒ¨ç½²åœ¨æœ¬åœ°ï¼Œç”µè„‘ä¸€å¼€æœºä½ è‡ªåŠ¨ç­¾åˆ°æ‰“å¡ï¼Œè¿™ä¸œè¥¿ä¹ŸæŒºç®€å•

### 5.ç»“æœ

![](./Images/result.png)

## ååæ§½

**è¿ç€å¥½å‡ å¤©éƒ½åœ¨æè¿™ä¸ªä»Šæ—¥æ ¡å›­è‡ªåŠ¨ç­¾åˆ°ï¼ŒçœŸçš„å°±æ˜¯æ„Ÿè§‰ä½ åœ¨é‡‘æ™ºçš„ç¨‹åºçŒ¿ç›¸äº’è¾ƒé‡ï¼Œä¹Ÿä¸æ˜¯æ²¡æœ‰æ”¶è·ï¼Œä»£ç åˆ åˆ æ”¹æ”¹ï¼Œæ–‡ä»¶å»ºç«‹åˆåˆ é™¤ï¼Œæœ‰æ—¶å€™ä½ æŠ“åŒ…æ‰¾åˆ°ä¸€ä¸ªé“¾æ¥ï¼Œä½ çœ‹åˆ«äººçš„ä»£ç åˆæœ‰æ›´å¥½çš„æ¥å£å’Œæ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯ä»–çš„åŠ å¯†æˆ‘åˆä¸ä¼šé€†å‘ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–å¤§ä½¬çš„å¸®åŠ©ï¼Œæˆ‘ææ€•å¡å¤šä¹…éƒ½æƒ³ä¸å‡ºå“ªä¸ªå°åœ°æ–¹åšäº†åŠ å¯†ï¼Œåšäº†éªŒè¯ï¼Œé‡‘æ™ºå¯¹æ¥å£å¥½åƒæœ‰é™åˆ¶ï¼Œæ²¡æœ‰å¿…è¦ä¸è¦é¢‘ç¹è°ƒç”¨æ¥å£ğŸ˜‚**

## å‚è€ƒèµ„æ–™

[auto-submit](https://github.com/ZimoLoveShuang/auto-submit.git)è¿™ä½å¤§ä½¬å¾ˆä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œä¸€äº›æ¥å£å·²ç»å¤±æ•ˆï¼Œä½†æ˜¯ä»–çš„å¯¹è¡¨å•çš„å¤„ç†æ–¹å¼æˆ‘è¡¨ç¤ºå­¦åˆ°äº†

[FuckCampus](https://github.com/Plutoeat/FuckCampus.git)è¿™ä¸ªèµ„æ–™å¸¦ä¸ªæˆ‘éå¸¸å¤šçš„æç¤ºï¼Œé‡å†™requestsæ–¹æ³•æˆ‘æ˜¯çœŸæ²¡æƒ³åˆ°ï¼Œè¿˜æœ‰ä»–çš„è§£å¯†å‡½æ•°ï¼Œ**æ„Ÿè°¢**

**æ„Ÿè°¢ä¸¤ä½å¤§ä½¬ï¼ï¼ï¼**
