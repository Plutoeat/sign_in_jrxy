# ä»Šæ—¥æ ¡å›­è‡ªåŠ¨ç­¾åˆ°

**éç§‘ç­å‡ºèº«ï¼Œä»£ç æœ‰ä¸è§„èŒƒçš„åœ°æ–¹è¯·è§è°…**

## ä¸€ã€èƒŒæ™¯

è‡ªä»ç–«æƒ…åï¼Œæˆ‘ä»¬å­¦æ ¡æ¯å¤©éƒ½è¦ä»Šæ—¥æ ¡å›­ç­¾åˆ°ï¼Œè€Œæˆ‘ç»å¸¸å¿˜è®°ï¼Œå®šäº†é—¹é’Ÿéƒ½ç»å¸¸å¿™å®Œæ‰‹ä¸Šçš„äº‹è½¬çœ¼å°±ç»™å¿˜äº†ï¼Œæ˜¯å¿˜ç­¾åˆ°åå•ä¸Šçš„å¸¸å®¢ï¼Œå‡†å¤‡å†™ä¸€ä¸ªç¨‹åºï¼Œè®©ä»–è‡ªåŠ¨ç­¾ä¸ªåˆ°

## äºŒã€å‡†å¤‡ç¯å¢ƒ

ä¸‹è½½ä¸€ä¸ª`python`ç¯å¢ƒ

ç‚¹å‡»[è¿›å…¥å®˜ç½‘](https://www.python.org/downloads/)

**æ¨èä½¿ç”¨3.7æˆ–3.8ç‰ˆæœ¬**ï¼Œé¡¹ç›®ä½¿ç”¨3.7ç‰ˆæœ¬

## ä¸‰ã€ç®€è¿°æ€è·¯

>1. **é¦–å…ˆæˆ‘ä»¬è¦ææ˜ç™½ä»Šæ—¥æ ¡å›­ç­¾åˆ°ä½ çš„æ‰‹æœºä¼šå‘å‡ºä»€ä¹ˆè¯·æ±‚**
>2. **ç„¶åæˆ‘ä»¬å¯¹è¿™ä¸ªè¯·æ±‚è¿›è¡Œä¸€ä¸ªæ¨¡æ‹Ÿ**
>3. **æœ€åæˆ‘ä»¬è¦æƒ³ä¸ªåŠæ³•è®©è¿™ä¸ªç¨‹åºæ¯å¤©è‡ªåŠ¨è¿è¡Œ**

## å››ã€å®ç°

### 1.å¯¹ä»Šæ—¥æ ¡å›­è¿›è¡ŒæŠ“åŒ…

éå¸¸éš¾å—, å®‰å“æ‰‹æœºè¯ä¹¦å¤ªå‘äº†

### 2.å†™ä»£ç 

åˆ›å»ºä¸€ä¸ª`Data.json`æ–‡ä»¶ç”¨äºå­˜æ”¾é…ç½®æ•°æ®

#### 1.é…ç½®æ—¥å¿—æ–‡ä»¶

æ–°å»ºæ–‡ä»¶`logger.conf`

```
#logger.conf

###############################################

[loggers]
keys=root,jrxy

[logger_root]
level=DEBUG
handlers=stream

[logger_jrxy]
handlers=stream,timedrt,http
qualname=jrxy
propagate=0

###############################################

[handlers]
keys=stream,timedrt,http

[handler_stream]
class=StreamHandler
level=NOTSET
formatter=form01
args=(sys.stderr,)

[handler_filert]
class=handlers.RotatingFileHandler
level=INFO
formatter=form02
args=('log/jrxy.log', 'a', 10*1024*1024, 5)

[handler_timedrt]
class=handlers.TimedRotatingFileHandler
level=DEBUG
formatter=form01
args=('log/jrxy.log', 'd', 1 , 5 )

[handler_http]
class=handlers.HTTPHandler
level=ERROR
formatter=form01
args=('localhost:8087', '/api/v1.0/log', 'POST')


###############################################

[formatters]
keys=form01,form02

[formatter_form01]
format=[%(asctime)s][%(filename)s][line:%(lineno)d][%(levelname)s] %(message)s
datefmt=%a, %d %b %Y %H:%M:%S

[formatter_form02]
format=%(name)-12s: %(levelname)-8s %(message)s
datefmt=
```

æ–°å»º`config.py`

```python
import logging
from logging import config

logging.config.fileConfig("logger.conf")
logger = logging.getLogger("jrxy")
```

æ–°å»ºæ–‡ä»¶å¤¹`log`,åœ¨logæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ–‡ä»¶`jrxy.log`

#### 2.è·å–å­¦æ ¡ID

æ–°å»º`getSchoolId.py`æ–‡ä»¶

```python
def getJson(url):
    try:
        r = requests.get(url, timeout=5)
        r.encoding = r.apparent_encoding
        return r.json()['data']
    except:
        raise

def cleanData(data: dict, school_list: list):
    pass
```

***è¿™é‡Œä¸è´´å‡ºå…·ä½“å®ç°ï¼Œæ‹¿åˆ°æ•°æ®äº†ï¼Œä»æ•°æ®ä¸­æ‰¾åˆ°å­¦æ ¡IDåº”è¯¥ä¸éš¾ã€‚***

#### 3.è·å–ç™»å½•çš„åœ°å€

ç™»å½•åœ°å€ä¸å¥½æå•Šï¼Œç›®å‰ä»…æ”¯æŒ`å¤§è¿å¤§å­¦`, ä¼šæçš„å¯ä»¥è‡ªå·±æ”¹æ”¹

æ–°å»º`getSchoolLoginUrl.py`æ–‡ä»¶

```python
def get_schoollist(url):
    pass


def get_url(data: dict, school_id: str):
	pass
```

**ç¬¬äºŒæ­¥å¯ä»¥çœç•¥ï¼Œæˆ‘å½“æ—¶æ˜¯å†™éƒ½å†™äº†å°±ç›´æ¥ç”¨idäº†ï¼Œä¼šæ”¹çš„å¾®æ”¹ä¸€ä¸‹ç¬¬ä¸‰æ­¥çš„ä»£ç å³å¯**

#### 4æ¨¡æ‹Ÿç™»å½•

ç™»å½•éå¸¸éº»çƒ¦ï¼Œæœ‰éå¸¸å¤šçš„éªŒè¯ï¼ŒéªŒè¯è™½ç„¶å¤šï¼Œä½†è¿˜å¥½çš„æ˜¯è¿‡äº†éªŒè¯å°±æˆåŠŸä¸€åŠäº†ğŸ˜

***==åŠ æ²¹ä¸Šå­¦äººï¼ï¼ï¼==***



```python
# è·å–secretkey
# url = "https://mobile.campushoy.com/app/auth/dynamic/secret/getSecretKey/v-9014"
```
