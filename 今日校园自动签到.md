# 今日校园自动签到

**非科班出身，代码有不规范的地方请见谅**

## 一、背景

自从疫情后，我们学校每天都要今日校园签到，而我经常忘记，定了闹钟都经常忙完手上的事转眼就给忘了，是忘签到名单上的常客，准备写一个程序，让他自动签个到

## 二、准备环境

下载一个`python`环境

点击[进入官网](https://www.python.org/downloads/)

**推荐使用3.7或3.8版本**，项目使用3.7版本

## 三、简述思路

>1. **首先我们要搞明白今日校园签到你的手机会发出什么请求**
>2. **然后我们对这个请求进行一个模拟**
>3. **最后我们要想个办法让这个程序每天自动运行**

## 四、实现

### 1.对今日校园进行抓包

非常难受, 安卓手机证书太坑了

### 2.写代码

创建一个`Data.json`文件用于存放配置数据

创建一个`test.py`文件用于单元测试

#### 1.获取学校ID

```python
def getJson(url):
    try:
        r = requests.get(url, timeout=5)
        r.encoding = r.apparent_encoding
        return r.json()['data']
    except:
        raise

def cleanData(data: dict, school_list: list):
    pass
```

***这里不贴出具体实现，拿到数据了，从数据中找到学校ID应该不难。***

#### 2.第二步就是获取登录的地址

这一步我还没有好有好的办法自动获取

故脚本仅支持大连大学



```python
# 获取secretkey
# url = "https://mobile.campushoy.com/app/auth/dynamic/secret/getSecretKey/v-9014"
```

## 参考资料

1. [今日校园自动提交问卷-Java实现](https://www.cnblogs.com/meethigher/articles/12849655.html)
1. [Xposed框架安装、使用及插件开发](https://www.52pojie.cn/thread-1293332-1-1.html#:~:text=Xposed%20%E6%A1%86%E6%9E%B6%E9%9C%80%E8%A6%81%E6%9C%89ROOT%E6%8E%88%E6%9D%83%E6%89%8D%E8%83%BD%E5%AE%89%E8%A3%85%EF%BC%8C%E5%AE%89%E5%8D%93%E7%9A%84%E4%B8%80%E5%88%87%E9%AB%98%E7%BA%A7%E5%BA%94%E7%94%A8%E9%83%BD%E9%9C%80%E8%A6%81ROOT%E6%9D%83%E9%99%90%E3%80%82%201.%E5%AE%89%E8%A3%85Xposed,%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%8C%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%E6%89%93%E5%BC%80%E8%BF%9B%E5%85%A5%E4%B8%BB%E7%95%8C%E9%9D%A2%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%E3%80%82%202.%E6%8F%90%E7%A4%BA%E2%80%9C%E6%A1%86%E6%9E%B6%E6%9C%AA%E5%AE%89%E8%A3%85%E2%80%9D%EF%BC%8C%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8C%E6%A1%86%E6%9E%B6%E5%AE%89%E8%A3%85%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%E3%80%82%203.%E6%8F%90%E7%A4%BA%E8%A6%81%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85%EF%BC%8C%E8%BF%98%E6%98%AF%E6%81%A2%E5%A4%8D%E5%AE%89%E8%A3%85%EF%BC%8C%E9%80%89%E6%8B%A9%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%E3%80%82%204.%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8%EF%BC%8C%E7%94%B1%E4%BA%8E%E9%9B%B7%E7%94%B5%E6%A8%A1%E6%8B%9F%E5%99%A8%E4%B8%8D%E6%94%AF%E6%8C%81%E8%87%AA%E5%90%AF%E5%8A%A8%EF%BC%8C%E6%89%80%E4%BB%A5%E9%9C%80%E8%A6%81%E6%89%8B%E5%8A%A8%E5%85%B3%E9%97%AD%E9%87%8D%E5%90%AF%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%9B%BE%E6%89%80%E7%A4%BA%E3%80%82)
1. [安装Xposed框架+JustTrustMe](https://cloud.tencent.com/developer/article/1856488)

